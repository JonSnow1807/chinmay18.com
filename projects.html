<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Chinmay Shrivastava</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=JetBrains+Mono:wght@400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #FEFEFE;
            --text: #0A0A0A;
            --accent: #5B4FFF;
            --success: #00D4AA;
            --warning: #FFB547;
            --error: #FF5B5B;
            --card-bg: #FFFFFF;
            --border: #E8E8E8;
            --code-bg: #F8F8F8;
        }

        body {
            font-family: 'Space Grotesk', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
            line-height: 1.6;
            cursor: none;
        }

        /* Custom Cursor */
        .cursor {
            position: fixed;
            width: 30px;
            height: 30px;
            border: 2px solid var(--accent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            transition: transform 0.1s, background 0.3s;
            mix-blend-mode: difference;
        }

        .cursor.hover {
            transform: scale(1.5);
            background: var(--accent);
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 40px;
            background: rgba(254, 254, 254, 0.9);
            backdrop-filter: blur(20px);
            z-index: 1000;
            border-bottom: 1px solid var(--border);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            font-size: 18px;
            color: var(--text);
            text-decoration: none;
        }

        .logo::before { content: '< '; color: var(--accent); }
        .logo::after { content: ' />'; color: var(--accent); }

        .nav-menu {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-menu a {
            color: var(--text);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-menu a:hover { color: var(--accent); }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 100px 40px 40px;
            position: relative;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            margin-bottom: 60px;
            position: relative;
        }

        .hero-title {
            font-size: clamp(4rem, 10vw, 8rem);
            font-weight: 700;
            margin-bottom: 40px;
            background: linear-gradient(135deg, var(--accent), var(--success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(30deg); }
        }

        /* Particle Background Canvas */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        /* Project Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
            position: relative;
            z-index: 10;
        }

        /* Project Card */
        .project-card {
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: 20px;
            padding: 30px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        /* Code Rain */
        .code-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .code-rain.active {
            opacity: 1;
        }

        .code-drop {
            position: absolute;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            color: var(--accent);
            opacity: 0;
            animation: codeFall 3s linear infinite;
            white-space: nowrap;
            text-shadow: 0 0 5px currentColor;
        }

        @keyframes codeFall {
            0% {
                transform: translateY(-100px);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent), var(--success));
            opacity: 0;
            transition: opacity 0.4s;
            z-index: -1;
        }

        .project-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--accent);
            box-shadow: 0 30px 60px rgba(91, 79, 255, 0.2);
        }

        .project-card:hover::before {
            opacity: 0.05;
        }

        .project-card.selected {
            border-color: var(--accent);
            transform: scale(1.05);
            box-shadow: 0 30px 60px rgba(91, 79, 255, 0.3);
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .project-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text);
            transition: color 0.3s;
        }

        .project-card:hover .project-title {
            color: var(--accent);
        }

        .project-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: transform 0.3s;
        }

        .project-card:hover .project-icon {
            transform: rotate(360deg);
        }

        .project-description {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .project-tag {
            padding: 6px 12px;
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 15px;
            font-size: 12px;
            transition: all 0.3s;
        }

        .project-card:hover .project-tag {
            border-color: var(--accent);
            background: rgba(91, 79, 255, 0.1);
        }

        .project-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            background: var(--accent);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
            opacity: 0;
            transform: translateY(10px);
        }

        .project-card:hover .project-link {
            opacity: 1;
            transform: translateY(0);
        }

        .project-link:hover {
            background: var(--success);
            transform: scale(1.05);
        }

        /* Interactive Canvas Overlay */
        #interactive-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* Hero Title Liquid Effect */
        .title-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .hero-title-text {
            position: relative;
            display: inline-block;
        }

        .hero-title.liquid-active {
            animation: liquidWave 0.8s ease-in-out;
        }

        @keyframes liquidWave {
            0%, 100% {
                filter: url('#liquid-filter');
            }
            50% {
                filter: url('#liquid-filter-2');
            }
        }

        /* Filter Controls */
        .filter-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 24px;
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: 25px;
            color: var(--text);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* Command Palette */
        .cmd-palette {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 600px;
            max-width: 90%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border: 2px solid var(--accent);
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cmd-palette.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .cmd-input {
            width: 100%;
            padding: 20px 25px;
            border: none;
            background: transparent;
            font-size: 18px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text);
            outline: none;
        }

        .cmd-results {
            max-height: 400px;
            overflow-y: auto;
            border-top: 1px solid var(--border);
        }

        .cmd-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cmd-item:hover,
        .cmd-item.selected {
            background: var(--code-bg);
            padding-left: 35px;
        }

        /* Mobile */
        @media (max-width: 768px) {
            body { cursor: auto; }
            .cursor { display: none; }
            .projects-grid {
                grid-template-columns: 1fr;
            }
            .hero-title {
                font-size: clamp(3rem, 12vw, 5rem);
            }
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor" id="cursor"></div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">CS</a>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="projects.html" style="color: var(--accent);">Projects</a></li>
                <li><a href="index.html#skills">Skills</a></li>
                <li><a href="index.html#experience">Experience</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Particle Background -->
    <canvas id="particle-canvas"></canvas>

    <!-- Interactive Canvas Overlay -->
    <canvas id="interactive-canvas"></canvas>

    <!-- Code Rain Container -->
    <div class="code-rain" id="codeRain"></div>

    <!-- Main Container -->
    <div class="container">
        <!-- Hero Section -->
        <section class="hero">
            <div id="liquid-title" style="position: relative; display: inline-block;">
                <canvas id="titleCanvas" style="position: absolute; top: 0; left: 0;"></canvas>
                <h1 class="hero-title" id="heroTitle" style="visibility: hidden;">PROJECTS</h1>
            </div>
        </section>

        <!-- Filter Controls -->
        <div class="filter-controls">
            <button class="filter-btn active" data-filter="all">All Projects</button>
            <button class="filter-btn" data-filter="ai">AI/ML</button>
            <button class="filter-btn" data-filter="systems">Systems</button>
            <button class="filter-btn" data-filter="web">Web</button>
            <button class="filter-btn" data-filter="tools">Tools</button>
        </div>

        <!-- Projects Grid -->
        <div class="projects-grid" id="projectsGrid">
            <!-- Projects will be dynamically inserted here -->
        </div>
    </div>

    <!-- Command Palette -->
    <div class="cmd-palette" id="cmdPalette">
        <input type="text" class="cmd-input" id="cmdInput" placeholder="Search projects or type a command...">
        <div class="cmd-results" id="cmdResults"></div>
    </div>

    <script>
        // Projects Data
        const projects = [
            {
                id: 'fastmqa',
                name: "FastMQA",
                description: "CUDA implementation of Multi-Query Attention achieving 97% KV-cache memory reduction for LLM inference.",
                tags: ["cuda", "gpu", "llm"],
                category: "ai",
                icon: "⚡",
                color: { r: 91, g: 79, b: 255 },
                url: "https://github.com/JonSnow1807/FastMQA",
                codeSnippets: [
                    "def multi_query_attention(Q, K, V):",
                    "__global__ void fastMQAKernel()",
                    "grid_size = (batch_size + BLOCK_SIZE - 1)",
                    "cudaMalloc(&d_output, size)",
                    "torch.cuda.synchronize()",
                    "// 97% memory reduction achieved",
                    "attention_weights = torch.softmax(scores)",
                    "kernel<<<blocks, threads>>>()",
                    "CUDA_CHECK(cudaMemcpy(host, device))"
                ]
            },
            {
                id: 'pytorch-autotune',
                name: "pytorch-autotune",
                description: "2-4x faster PyTorch training with one line of code. Zero config automatic hardware optimization.",
                tags: ["pytorch", "optimization", "automl"],
                category: "ai",
                icon: "🚀",
                color: { r: 0, g: 212, b: 170 },
                url: "https://github.com/JonSnow1807/pytorch-autotune",
                codeSnippets: [
                    "from pytorch_autotune import optimize",
                    "model = optimize(model)",
                    "# 4.06x speedup achieved",
                    "torch.compile(mode='max-autotune')",
                    "optimizer.step()",
                    "with torch.cuda.amp.autocast():",
                    "loss.backward()",
                    "scheduler.step()",
                    "@torch.jit.script"
                ]
            },
            {
                id: 'point-cloud',
                name: "3D-Point-Cloud-Viewer",
                description: "High-performance 3D visualization engine achieving 858 FPS with 1M+ points through spatial optimization.",
                tags: ["opengl", "cpp", "3d", "graphics"],
                category: "systems",
                icon: "🎮",
                color: { r: 255, g: 181, b: 71 },
                url: "https://github.com/JonSnow1807/3D-Point-Cloud-Viewer",
                codeSnippets: [
                    "glBindVertexArray(VAO);",
                    "std::vector<Point3D> points;",
                    "// Octree optimization",
                    "frustum.cullPoints(octree);",
                    "glDrawArrays(GL_POINTS, 0, count);",
                    "shader.setMat4('projection', proj);",
                    "858 FPS @ 1M points",
                    "glEnable(GL_DEPTH_TEST);",
                    "VBO.allocate(vertices.data())"
                ]
            },
            {
                id: 'realityguard',
                name: "RealityGuard",
                description: "Privacy-preserving real-time vision system for Meta Quest 3. 900+ FPS with content safety filtering.",
                tags: ["vision", "privacy", "vr"],
                category: "ai",
                icon: "🔒",
                color: { r: 255, g: 91, b: 91 },
                url: "https://github.com/JonSnow1807/RealityGuard",
                codeSnippets: [
                    "cv2.GaussianBlur(frame, (21, 21))",
                    "# Privacy filter activated",
                    "detector.detectAndFilter()",
                    "900+ FPS achieved",
                    "frame = quest3.capture()",
                    "if is_sensitive(region):",
                    "apply_privacy_mask()",
                    "model.predict(frame)",
                    "secure_stream.write(frame)"
                ]
            },
            {
                id: 'api-orchestrator',
                name: "api-orchestrator",
                description: "AI-powered API development platform that automatically discovers, documents, and tests your APIs.",
                tags: ["fastapi", "websocket", "automation"],
                category: "web",
                icon: "🔧",
                color: { r: 168, g: 85, b: 247 },
                url: "https://github.com/JonSnow1807/api-orchestrator",
                codeSnippets: [
                    "@app.post('/api/orchestrate')",
                    "async def websocket_endpoint(ws):",
                    "await ws.accept()",
                    "# Auto-generate OpenAPI spec",
                    "discover_endpoints()",
                    "test_suite.run_all()",
                    "mock_server.start()",
                    "response = await client.post()",
                    "DocumentationGenerator.build()"
                ]
            },
            {
                id: 'watch-party',
                name: "Mustard-Watch-Party",
                description: "Real-time video synchronization platform with <500ms latency. Multi-user rooms with JWT auth.",
                tags: ["react", "websocket", "nestjs"],
                category: "web",
                icon: "📺",
                color: { r: 49, g: 120, b: 198 },
                url: "https://github.com/JonSnow1807/Mustard-Watch-Party",
                codeSnippets: [
                    "socket.emit('sync', timestamp)",
                    "const [videoTime, setVideoTime] = ",
                    "@WebSocketGateway()",
                    "// <500ms sync latency",
                    "jwt.verify(token, secret)",
                    "room.broadcast('play')",
                    "useEffect(() => syncVideo())",
                    "handlePlayerStateChange()",
                    "prisma.room.create()"
                ]
            },
            {
                id: 'gradient-cache',
                name: "gradient-cache",
                description: "GPU memory-efficient training for PyTorch. 90%+ memory savings through gradient compression.",
                tags: ["pytorch", "memory", "optimization"],
                category: "ai",
                icon: "💾",
                color: { r: 34, g: 197, b: 94 },
                url: "https://github.com/JonSnow1807/gradient-cache",
                codeSnippets: [
                    "grad = compress_gradient(grad)",
                    "# 90% memory reduction",
                    "cache.store(compressed)",
                    "torch.cuda.empty_cache()",
                    "accumulate_gradients()",
                    "decompress_and_apply()",
                    "optimizer.zero_grad()",
                    "checkpoint_gradients()",
                    "memory_efficient_backward()"
                ]
            },
            {
                id: 'medical-ocr',
                name: "Medical-Prescription-OCR",
                description: "OCR system for handwritten prescriptions using Donut transformer and zero-shot classification.",
                tags: ["ocr", "vision", "transformers"],
                category: "ai",
                icon: "🏥",
                color: { r: 245, g: 158, b: 11 },
                url: "https://github.com/JonSnow1807/Medical-Prescription-OCR",
                codeSnippets: [
                    "from transformers import DonutProcessor",
                    "image = Image.open(prescription)",
                    "text = model.generate(pixel_values)",
                    "# Zero-shot classification",
                    "medicine = extract_medicine(text)",
                    "dosage = parse_dosage(text)",
                    "confidence = calculate_confidence()",
                    "processor.decode(outputs)",
                    "validate_prescription()"
                ]
            },
            {
                id: 'scheduler',
                name: "student-scheduler",
                description: "Google OR-Tools constraint solver scheduling 500+ students. Zero conflicts, 60-second optimization.",
                tags: ["ortools", "flask", "kubernetes"],
                category: "tools",
                icon: "📅",
                color: { r: 236, g: 72, b: 153 },
                url: "https://github.com/JonSnow1807/student-scheduler",
                codeSnippets: [
                    "from ortools.sat.python import cp_model",
                    "model.Add(no_conflicts)",
                    "solver.Solve(model)",
                    "# 500+ students, 0 conflicts",
                    "@app.route('/schedule')",
                    "deployment.yaml",
                    "solver.parameters.max_time = 60",
                    "redis.set('schedule', result)",
                    "kubernetes.apply(config)"
                ]
            }
        ];

        let selectedProject = null;
        let currentFilter = 'all';
        let cmdPaletteOpen = false;
        let codeRainInterval = null;

        // Custom Cursor
        const cursor = document.getElementById('cursor');
        let cursorX = 0, cursorY = 0;

        document.addEventListener('mousemove', (e) => {
            cursorX = e.clientX;
            cursorY = e.clientY;
            cursor.style.left = cursorX - 15 + 'px';
            cursor.style.top = cursorY - 15 + 'px';
        });

        // Background Particles
        const bgCanvas = document.getElementById('particle-canvas');
        const bgCtx = bgCanvas.getContext('2d');
        bgCanvas.width = window.innerWidth;
        bgCanvas.height = window.innerHeight;

        const bgParticles = [];
        for (let i = 0; i < 50; i++) {
            bgParticles.push({
                x: Math.random() * bgCanvas.width,
                y: Math.random() * bgCanvas.height,
                vx: (Math.random() - 0.5) * 0.5,
                vy: (Math.random() - 0.5) * 0.5,
                radius: Math.random() * 2 + 1
            });
        }

        function animateBackground() {
            bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
            
            bgParticles.forEach((p, i) => {
                p.x += p.vx;
                p.y += p.vy;
                
                if (p.x < 0 || p.x > bgCanvas.width) p.vx *= -1;
                if (p.y < 0 || p.y > bgCanvas.height) p.vy *= -1;
                
                // Draw connections
                bgParticles.slice(i + 1).forEach(p2 => {
                    const dist = Math.hypot(p2.x - p.x, p2.y - p.y);
                    if (dist < 100) {
                        bgCtx.beginPath();
                        bgCtx.moveTo(p.x, p.y);
                        bgCtx.lineTo(p2.x, p2.y);
                        bgCtx.strokeStyle = `rgba(91, 79, 255, ${0.1 * (1 - dist / 100)})`;
                        bgCtx.stroke();
                    }
                });
                
                // Draw particle
                bgCtx.beginPath();
                bgCtx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                bgCtx.fillStyle = 'rgba(91, 79, 255, 0.3)';
                bgCtx.fill();
            });
            
            requestAnimationFrame(animateBackground);
        }
        animateBackground();

        // Interactive Canvas for Project Selection
        const interCanvas = document.getElementById('interactive-canvas');
        const interCtx = interCanvas.getContext('2d');
        interCanvas.width = window.innerWidth;
        interCanvas.height = window.innerHeight;

        const projectParticles = [];

        function createProjectParticles(project, cardElement) {
            const rect = cardElement.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            // Clear existing particles for this project
            projectParticles.length = 0;
            
            // Create particles that emanate from the card
            for (let i = 0; i < 30; i++) {
                const angle = (i / 30) * Math.PI * 2;
                projectParticles.push({
                    x: centerX,
                    y: centerY,
                    targetX: centerX + Math.cos(angle) * 150,
                    targetY: centerY + Math.sin(angle) * 150,
                    vx: Math.cos(angle) * 5,
                    vy: Math.sin(angle) * 5,
                    radius: Math.random() * 4 + 2,
                    color: project.color,
                    life: 100
                });
            }
        }

        function animateProjectParticles() {
            interCtx.clearRect(0, 0, interCanvas.width, interCanvas.height);
            
            projectParticles.forEach((p, index) => {
                p.x += p.vx;
                p.y += p.vy;
                p.vx *= 0.95;
                p.vy *= 0.95;
                p.life--;
                
                if (p.life <= 0) {
                    projectParticles.splice(index, 1);
                    return;
                }
                
                const gradient = interCtx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.radius);
                gradient.addColorStop(0, `rgba(${p.color.r}, ${p.color.g}, ${p.color.b}, ${p.life / 100})`);
                gradient.addColorStop(1, `rgba(${p.color.r}, ${p.color.g}, ${p.color.b}, 0)`);
                
                interCtx.fillStyle = gradient;
                interCtx.beginPath();
                interCtx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                interCtx.fill();
            });
            
            if (projectParticles.length > 0) {
                requestAnimationFrame(animateProjectParticles);
            }
        }

        // Title Liquid Particle Effect
        const titleCanvas = document.getElementById('titleCanvas');
        const titleCtx = titleCanvas.getContext('2d');
        const heroTitle = document.getElementById('heroTitle');
        let titleParticles = [];
        let mouseX = 0;
        let mouseY = 0;
        let titleBounds = null;

        function initTitleEffect() {
            // Get title dimensions
            const rect = heroTitle.getBoundingClientRect();
            titleCanvas.width = rect.width + 200; // Increased padding to prevent cutoff
            titleCanvas.height = rect.height + 100;
            titleCanvas.style.width = (rect.width + 200) + 'px';
            titleCanvas.style.height = (rect.height + 100) + 'px';
            titleCanvas.style.left = '-100px'; // Adjusted to center with new padding
            titleCanvas.style.top = '-50px';
            
            titleBounds = rect;
            
            // Create off-screen canvas to sample text
            const offCanvas = document.createElement('canvas');
            const offCtx = offCanvas.getContext('2d');
            offCanvas.width = titleCanvas.width;
            offCanvas.height = titleCanvas.height;
            
            // Draw text on off-screen canvas
            offCtx.font = `700 ${rect.height * 0.8}px Space Grotesk`;
            offCtx.textAlign = 'center';
            offCtx.textBaseline = 'middle';
            offCtx.fillStyle = '#000';
            offCtx.fillText('PROJECTS', titleCanvas.width / 2, titleCanvas.height / 2);
            
            // Sample the text and create particles
            const imageData = offCtx.getImageData(0, 0, offCanvas.width, offCanvas.height);
            titleParticles = [];
            
            const spacing = 3; // Distance between particles
            for (let x = 0; x < offCanvas.width; x += spacing) {
                for (let y = 0; y < offCanvas.height; y += spacing) {
                    const index = (y * offCanvas.width + x) * 4;
                    const alpha = imageData.data[index + 3];
                    
                    if (alpha > 128) { // If pixel is part of text
                        titleParticles.push({
                            x: x,
                            y: y,
                            baseX: x,
                            baseY: y,
                            vx: 0,
                            vy: 0,
                            radius: Math.random() * 1.5 + 0.5,
                            // Vibrant gradient colors matching the title
                            color: Math.random() > 0.5 ? 
                                { r: 91, g: 79, b: 255 } :  // Accent purple
                                { r: 0, g: 212, b: 170 }    // Success teal
                        });
                    }
                }
            }
        }

        function animateTitleParticles() {
            titleCtx.clearRect(0, 0, titleCanvas.width, titleCanvas.height);
            
            titleParticles.forEach(particle => {
                // Calculate distance from mouse
                const dx = mouseX - (particle.x + titleBounds.left - 100); // Adjusted for new padding
                const dy = mouseY - (particle.y + titleBounds.top - 50);
                const distance = Math.sqrt(dx * dx + dy * dy);
                const maxDistance = 100;
                
                if (distance < maxDistance) {
                    // Repel from mouse
                    const force = (maxDistance - distance) / maxDistance;
                    const angle = Math.atan2(dy, dx);
                    particle.vx -= Math.cos(angle) * force * 3;
                    particle.vy -= Math.sin(angle) * force * 3;
                }
                
                // Return to base position
                const returnX = particle.baseX - particle.x;
                const returnY = particle.baseY - particle.y;
                particle.vx += returnX * 0.05;
                particle.vy += returnY * 0.05;
                
                // Apply velocity
                particle.x += particle.vx;
                particle.y += particle.vy;
                
                // Damping
                particle.vx *= 0.85;
                particle.vy *= 0.85;
                
                // Draw particle
                titleCtx.beginPath();
                titleCtx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                titleCtx.fillStyle = `rgba(${particle.color.r}, ${particle.color.g}, ${particle.color.b}, 0.9)`;
                titleCtx.fill();
            });
            
            requestAnimationFrame(animateTitleParticles);
        }

        // Track mouse position
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        // Initialize and start animation
        setTimeout(() => {
            initTitleEffect();
            animateTitleParticles();
        }, 100);

        // Render Projects
        function renderProjects() {
            const grid = document.getElementById('projectsGrid');
            grid.innerHTML = '';
            
            const filtered = projects.filter(p => 
                currentFilter === 'all' || p.category === currentFilter
            );
            
            filtered.forEach((project, index) => {
                const card = document.createElement('div');
                card.className = 'project-card';
                card.dataset.projectId = project.id;
                card.style.animationDelay = `${index * 0.1}s`;
                
                card.innerHTML = `
                    <div class="project-header">
                        <h3 class="project-title">${project.name}</h3>
                        <div class="project-icon" style="background: rgba(${project.color.r}, ${project.color.g}, ${project.color.b}, 0.1);">
                            ${project.icon}
                        </div>
                    </div>
                    <p class="project-description">${project.description}</p>
                    <div class="project-tags">
                        ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
                    </div>
                    <a href="${project.url}" target="_blank" class="project-link">
                        View on GitHub →
                    </a>
                `;
                
                card.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('project-link')) {
                        selectProject(project, card);
                    }
                });
                
                card.addEventListener('mouseenter', () => {
                    cursor.classList.add('hover');
                    createProjectParticles(project, card);
                    animateProjectParticles();
                    startCodeRain(project);
                });
                
                card.addEventListener('mouseleave', () => {
                    cursor.classList.remove('hover');
                    stopCodeRain();
                });
                
                grid.appendChild(card);
            });
        }

        // Select Project
        function selectProject(project, cardElement) {
            // Remove previous selection
            document.querySelectorAll('.project-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            cardElement.classList.add('selected');
            selectedProject = project;
        }

        // Code Rain Effect
        function startCodeRain(project) {
            const codeRain = document.getElementById('codeRain');
            codeRain.classList.add('active');
            codeRain.innerHTML = '';
            
            // Create multiple code drops immediately
            const createDrop = () => {
                const drop = document.createElement('div');
                drop.className = 'code-drop';
                drop.style.left = Math.random() * window.innerWidth + 'px';
                drop.style.animationDelay = Math.random() * 0.5 + 's';
                drop.style.animationDuration = (4 + Math.random() * 2) + 's';  // Increased from 2-3s to 4-6s
                
                // Use actual code snippets from the project
                const snippet = project.codeSnippets[Math.floor(Math.random() * project.codeSnippets.length)];
                drop.textContent = snippet;
                drop.style.color = `rgba(${project.color.r}, ${project.color.g}, ${project.color.b}, 0.6)`;
                
                codeRain.appendChild(drop);
                
                // Remove drop after animation
                setTimeout(() => {
                    if (drop && drop.parentNode) {
                        drop.remove();
                    }
                }, 6000);  // Increased to match max animation duration
            };
            
            // Create initial drops immediately with no delay
            for (let i = 0; i < 8; i++) {
                createDrop();
            }
            
            // Continue creating drops more frequently
            codeRainInterval = setInterval(createDrop, 200);
        }
        
        function stopCodeRain() {
            const codeRain = document.getElementById('codeRain');
            codeRain.classList.remove('active');
            clearInterval(codeRainInterval);
            
            // Fade out existing drops
            setTimeout(() => {
                codeRain.innerHTML = '';
            }, 300);
        }

        // Filter Controls
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                renderProjects();
            });
        });

        // Command Palette
        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                toggleCommandPalette();
            }
            
            if (cmdPaletteOpen && e.key === 'Escape') {
                toggleCommandPalette();
            }
        });

        function toggleCommandPalette() {
            const palette = document.getElementById('cmdPalette');
            const input = document.getElementById('cmdInput');
            cmdPaletteOpen = !cmdPaletteOpen;
            
            if (cmdPaletteOpen) {
                palette.classList.add('active');
                input.focus();
                input.value = '';
                updateCommandResults('');
            } else {
                palette.classList.remove('active');
            }
        }

        function updateCommandResults(query) {
            const results = document.getElementById('cmdResults');
            
            const filtered = projects.filter(p =>
                p.name.toLowerCase().includes(query.toLowerCase())
            );
            
            results.innerHTML = '';
            filtered.forEach(project => {
                const item = document.createElement('div');
                item.className = 'cmd-item';
                item.innerHTML = `
                    <span>${project.name}</span>
                    <span style="font-size: 12px; color: #999;">↵</span>
                `;
                item.addEventListener('click', () => {
                    window.open(project.url, '_blank');
                    toggleCommandPalette();
                });
                results.appendChild(item);
            });
        }

        document.getElementById('cmdInput').addEventListener('input', (e) => {
            updateCommandResults(e.target.value);
        });

        // Window resize
        window.addEventListener('resize', () => {
            bgCanvas.width = window.innerWidth;
            bgCanvas.height = window.innerHeight;
            interCanvas.width = window.innerWidth;
            interCanvas.height = window.innerHeight;
            initTitleEffect(); // Reinitialize title effect on resize
        });

        // Initialize
        renderProjects();
    </script>
</body>
</html>